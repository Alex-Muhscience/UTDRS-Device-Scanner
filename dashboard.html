<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kenya SME Cybersecurity - Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* Existing styles remain unchanged */
        :root {
            --primary: #22FF85;
            --primary-dark: #1acf6d;
            --secondary: #1a2357;
            --danger: #ff5b5c;
            --warning: #ff9f43;
            --info: #5b8cff;
            --dark: #0f1736;
            --light: #f8f9fa;
            --gray: #6c757d;
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        body {
            background: linear-gradient(135deg, var(--secondary) 0%, var(--dark) 100%);
            color: white;
            min-height: 100vh;
            display: flex;
            overflow-x: hidden;
        }
        .sidebar {
            width: 250px;
            background-color: rgba(0, 0, 0, 0.2);
            padding: 20px 0;
            height: 100vh;
            position: fixed;
            overflow-y: auto;
            transition: all 0.3s;
            z-index: 1000;
        }
        .sidebar-collapsed {
            width: 80px;
        }
        .sidebar-collapsed .logo h1,
        .sidebar-collapsed .nav-link span {
            display: none;
        }
        .sidebar-collapsed .nav-link {
            justify-content: center;
        }
        .sidebar-collapsed .nav-link i {
            margin-right: 0;
            font-size: 20px;
        }
        .logo {
            display: flex;
            align-items: center;
            padding: 0 20px;
            margin-bottom: 30px;
            position: relative;
        }
        .logo img {
            width: 40px;
            height: 40px;
            margin-right: 10px;
        }
        .logo h1 {
            font-size: 18px;
            font-weight: 600;
            transition: all 0.3s;
        }
        .toggle-sidebar {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            font-size: 16px;
        }
        .nav-menu {
            list-style: none;
        }
        .nav-item {
            margin-bottom: 5px;
        }
        .nav-link {
            display: flex;
            align-items: center;
            padding: 12px 20px;
            color: rgba(255, 255, 255, 0.7);
            text-decoration: none;
            transition: all 0.3s;
            position: relative;
        }
        .nav-link:hover, .nav-link.active {
            background-color: rgba(34, 255, 133, 0.2);
            color: var(--primary);
        }
        .nav-link i {
            margin-right: 10px;
            font-size: 18px;
            min-width: 20px;
        }
        .main-content {
            flex: 1;
            margin-left: 250px;
            padding: 20px;
            transition: all 0.3s;
        }
        .main-content-expanded {
            margin-left: 80px;
        }
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        .page-title {
            font-size: 24px;
            font-weight: 600;
            display: flex;
            align-items: center;
        }
        .page-title i {
            margin-right: 10px;
        }
        .user-info {
            display: flex;
            align-items: center;
        }
        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--primary);
            display: flex;
            justify-content: center;
            align-items: center;
            margin-right: 15px;
            font-weight: bold;
            color: var(--dark);
        }
        .user-details {
            margin-right: 15px;
            text-align: right;
        }
        .user-name {
            font-weight: 600;
            margin-bottom: 3px;
        }
        .user-role {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.7);
        }
        .logout-btn {
            background-color: transparent;
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
        }
        .logout-btn i {
            margin-right: 5px;
        }
        .logout-btn:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }
        .dashboard-widgets {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        .widget {
            background-color: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: all 0.3s;
        }
        .widget:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.2);
        }
        .widget-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        .widget-title {
            font-size: 18px;
            font-weight: 600;
            display: flex;
            align-items: center;
        }
        .widget-title i {
            margin-right: 10px;
            color: var(--primary);
        }
        .widget-actions {
            display: flex;
            gap: 10px;
        }
        .widget-btn {
            background: none;
            border: none;
            color: rgba(255, 255, 255, 0.5);
            cursor: pointer;
            transition: all 0.3s;
        }
        .widget-btn:hover {
            color: var(--primary);
        }
        .chart-container {
            width: 100%;
            height: 150px;
            position: relative;
        }
        /* Remaining styles remain unchanged */
    </style>
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <div class="logo">
            <svg width="40" height="40" viewBox="0 0 100 100">
                <rect width="100" height="100" rx="20" fill="#22FF85" />
                <path d="M50 20C33.4315 20 20 33.4315 20 50C20 66.5685 33.4315 80 50 80C66.5685 80 80 66.5685 80 50C80 33.4315 66.5685 20 50 20ZM50 25C63.8071 25 75 36.1929 75 50C75 63.8071 63.8071 75 50 75C36.1929 75 25 63.8071 25 50C25 36.1929 36.1929 25 50 25Z" fill="white" />
                <path d="M45 60L35 50L40 45L45 50L60 35L65 40L45 60Z" fill="white" />
            </svg>
            <h1>UTDRS</h1>
            <button class="toggle-sidebar" id="toggleSidebar"><i class="fas fa-chevron-left"></i></button>
        </div>
        <ul class="nav-menu">
            <li class="nav-item non-admin-only">
                <a href="#" class="nav-link active" data-page="dashboard">
                    <i class="fas fa-chart-line"></i>
                    <span>Dashboard</span>
                </a>
            </li>
            <li class="nav-item admin-only">
                <a href="#" class="nav-link" data-page="organizations">
                    <i class="fas fa-building"></i>
                    <span>Organizations</span>
                </a>
            </li>
            <li class="nav-item analyst-only user-only">
                <a href="#" class="nav-link" data-page="users">
                    <i class="fas fa-users"></i>
                    <span>Users</span>
                </a>
            </li>
            <li class="nav-item non-admin-only">
                <a href="#" class="nav-link" data-page="devices">
                    <i class="fas fa-laptop"></i>
                    <span>Devices</span>
                </a>
            </li>
            <li class="nav-item non-admin-only">
                <a href="#" class="nav-link" data-page="threats">
                    <i class="fas fa-exclamation-triangle"></i>
                    <span>Threats</span>
                </a>
            </li>
        </ul>
    </div>

    <!-- Main Content -->
    <div class="main-content" id="mainContent">
        <div class="header">
            <h1 class="page-title">
                <i class="fas fa-chart-line"></i>
                Dashboard
            </h1>
            <div class="user-info">
                <div class="user-avatar" id="userAvatar">A</div>
                <div class="user-details">
                    <div class="user-name" id="userName">Admin</div>
                    <div class="user-role" id="userRole">Administrator</div>
                </div>
                <button class="logout-btn" id="logoutBtn">
                    <i class="fas fa-sign-out-alt"></i>
                    Logout
                </button>
            </div>
        </div>
        <div class="dashboard-widgets">
            <div class="widget">
                <div class="widget-header">
                    <h3 class="widget-title">
                        <i class="fas fa-shield-alt"></i>
                        Security Overview
                    </h3>
                    <div class="widget-actions">
                        <button class="widget-btn" title="Refresh">
                            <i class="fas fa-sync-alt"></i>
                        </button>
                    </div>
                </div>
                <div class="widget-content">
                    <div class="stats">
                        <div class="stat-item">
                            <div class="stat-value negative">24</div>
                            <div class="stat-label">Active Threats</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value warning">12</div>
                            <div class="stat-label">Vulnerabilities</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value positive">75%</div>
                            <div class="stat-label">Security Score</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="widget">
                <div class="widget-header">
                    <h3 class="widget-title">
                        <i class="fas fa-laptop"></i>
                        Device Status
                    </h3>
                    <div class="widget-actions">
                        <button class="widget-btn" title="Refresh">
                            <i class="fas fa-sync-alt"></i>
                        </button>
                    </div>
                </div>
                <div class="widget-content">
                    <div class="chart-container">
                        <canvas id="deviceStatusChart"></canvas>
                    </div>
                </div>
            </div>
            <div class="widget">
                <div class="widget-header">
                    <h3 class="widget-title">
                        <i class="fas fa-exclamation-triangle"></i>
                        Threat Distribution
                    </h3>
                    <div class="widget-actions">
                        <button class="widget-btn" title="View All">
                            <i class="fas fa-expand"></i>
                        </button>
                    </div>
                </div>
                <div class="widget-content">
                    <div class="chart-container">
                        <canvas id="threatDistributionChart"></canvas>
                    </div>
                </div>
            </div>
            <div class="widget">
                <div class="widget-header">
                    <h3 class="widget-title">
                        <i class="fas fa-network-wired"></i>
                        Network Traffic
                    </h3>
                    <div class="widget-actions">
                        <button class="widget-btn" title="Refresh">
                            <i class="fas fa-sync-alt"></i>
                        </button>
                    </div>
                </div>
                <div class="widget-content">
                    <div class="chart-container">
                        <canvas id="networkTrafficChart"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script>
        // Simulated data for the dashboard
        const dashboardData = {
            user: {
                name: "Admin",
                role: "admin",
                avatar: "A"
            },
            stats: {
                activeThreats: 24,
                vulnerabilities: 12,
                securityScore: 75
            },
            deviceStatus: {
                online: 45,
                offline: 3,
                compromised: 2,
                patching: 5
            },
            threatDistribution: {
                ransomware: 8,
                phishing: 5,
                malware: 6,
                unauthorizedAccess: 3,
                other: 2
            },
            networkTraffic: {
                labels: ["00:00", "04:00", "08:00", "12:00", "16:00", "20:00"],
                inbound: [120, 80, 150, 200, 180, 90],
                outbound: [80, 60, 120, 150, 200, 70],
                malicious: [2, 1, 0, 3, 1, 0]
            }
        };

        // Initialize DOM elements
        const toggleSidebarBtn = document.getElementById('toggleSidebar');
        const sidebar = document.getElementById('sidebar');
        const mainContent = document.getElementById('mainContent');

        // Populate user info
        document.getElementById('userAvatar').textContent = dashboardData.user.avatar;
        document.getElementById('userName').textContent = dashboardData.user.name;
        document.getElementById('userRole').textContent = dashboardData.user.role === 'admin' ? 'Administrator' : 'User';

        // Toggle sidebar functionality
        toggleSidebarBtn.addEventListener('click', () => {
            sidebar.classList.toggle('sidebar-collapsed');
            mainContent.classList.toggle('main-content-expanded');
            toggleSidebarBtn.querySelector('i').classList.toggle('fa-chevron-left');
            toggleSidebarBtn.querySelector('i').classList.toggle('fa-chevron-right');
        });

        // Render Device Status Chart
        const deviceStatusChartCtx = document.getElementById('deviceStatusChart').getContext('2d');
        new Chart(deviceStatusChartCtx, {
            type: 'pie',
            data: {
                labels: ['Online', 'Offline', 'Compromised', 'Patching'],
                datasets: [{
                    data: [
                        dashboardData.deviceStatus.online,
                        dashboardData.deviceStatus.offline,
                        dashboardData.deviceStatus.compromised,
                        dashboardData.deviceStatus.patching
                    ],
                    backgroundColor: ['#22FF85', '#FF9F43', '#FF5B5C', '#5B8CFF']
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        position: 'bottom'
                    }
                }
            }
        });

        // Render Threat Distribution Chart
        const threatDistributionChartCtx = document.getElementById('threatDistributionChart').getContext('2d');
        new Chart(threatDistributionChartCtx, {
            type: 'bar',
            data: {
                labels: ['Ransomware', 'Phishing', 'Malware', 'Unauthorized Access', 'Other'],
                datasets: [{
                    label: 'Threat Count',
                    data: [
                        dashboardData.threatDistribution.ransomware,
                        dashboardData.threatDistribution.phishing,
                        dashboardData.threatDistribution.malware,
                        dashboardData.threatDistribution.unauthorizedAccess,
                        dashboardData.threatDistribution.other
                    ],
                    backgroundColor: ['#FF5B5C', '#FF9F43', '#22FF85', '#5B8CFF', '#6C757D']
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        display: false
                    }
                },
                scales: {
                    x: {
                        grid: {
                            display: false
                        }
                    },
                    y: {
                        beginAtZero: true,
                        grid: {
                            color: 'rgba(255, 255, 255, 0.1)'
                        }
                    }
                }
            }
        });

        // Render Network Traffic Chart
        const networkTrafficChartCtx = document.getElementById('networkTrafficChart').getContext('2d');
        new Chart(networkTrafficChartCtx, {
            type: 'line',
            data: {
                labels: dashboardData.networkTraffic.labels,
                datasets: [
                    {
                        label: 'Inbound Traffic',
                        data: dashboardData.networkTraffic.inbound,
                        borderColor: '#22FF85',
                        backgroundColor: 'rgba(34, 255, 133, 0.2)',
                        fill: true
                    },
                    {
                        label: 'Outbound Traffic',
                        data: dashboardData.networkTraffic.outbound,
                        borderColor: '#5B8CFF',
                        backgroundColor: 'rgba(91, 140, 255, 0.2)',
                        fill: true
                    },
                    {
                        label: 'Malicious Traffic',
                        data: dashboardData.networkTraffic.malicious,
                        borderColor: '#FF5B5C',
                        backgroundColor: 'rgba(255, 91, 92, 0.2)',
                        fill: true
                    }
                ]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        position: 'bottom'
                    }
                },
                scales: {
                    x: {
                        grid: {
                            display: false
                        }
                    },
                    y: {
                        beginAtZero: true,
                        grid: {
                            color: 'rgba(255, 255, 255, 0.1)'
                        }
                    }
                }
            }
        });
    </script>
</body>
</html>